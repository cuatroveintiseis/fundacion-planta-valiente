const translations = {
    es: {
        "title": "Fundación Planta Valiente",
        "navbar.brand": "Fundación Planta Valiente",
        "navbar.home": "Inicio",
        "navbar.proyecto": "Volver a Inicio",
        "navbar.about": "Quienes somos",
        "navbar.team": "Equipo",
        "navbar.projects": "Proyectos",
        "navbar.projects.all": "Todos",
        "navbar.projects1": "Recolección de Aceites",
        "navbar.projects2": "Actividades Medio Ambientales",
        "navbar.projects3": "Aulas Libres",
        "navbar.alliances": "Alianzas",
        "navbar.news": "Noticias",
        "navbar.contact": "Contacto",
        "navbar.language": "ES | EN",
        "carousel.slogan1": "EDUCAR PARA TRANSFORMAR",
        "carousel.slogan2": "COMUNIDAD, CONCIENCIA Y ACCIÓN",
        "carousel.slogan3": "AULAS LIBRES",
        "carousel.slogan4": "HACIA RUTAS COSTERAS",
        "carousel.prev": "Previous",
        "carousel.next": "Next",
        "about.title": "¿QUIÉNES SOMOS?",
        "about.text1": "La Fundación Planta Valiente nace hace 4 años con la misión de reconectar a las personas con la naturaleza a través de la educación ambiental. Creemos que la educación es transversal y está presente en todas nuestras acciones, desde cómo nos comunicamos hasta cómo interactuamos con el entorno.",
        "about.text2": "Vivimos en el Antropoceno, una era en la que las acciones humanas han transformado el planeta. Esto nos obliga a actuar de manera urgente y consciente. Por ello, nuestras acciones se centran en movilizar cambios reales y directos a través de la educación y la conciencia ambiental.",
        "about.text3": "Nos movilizamos a nivel nacional, y aspiramos a una visión internacional, porque entendemos que la crisis ambiental es global y requiere un esfuerzo colectivo. A través de acciones como el reciclaje, la limpieza de playas y la educación, buscamos inspirar un cambio en la forma en que las personas se relacionan con el planeta.",
        "counter.beach": "Limpiezas de playas y ríos",
        "counter.volunteers": "Voluntarios involucrados",
        "counter.waste": "Kilos de basura recolectados",
        "team.title": "NUESTRO EQUIPO",
        "team.felipe.name": "Felipe Altamirano",
        "team.felipe.role": "Fundador & CEO",
        "team.victoria.name": "Victoria Cataldo",
        "team.victoria.role": "Directora de Arte",
        "team.cesar.name": "Cesar Coumerme",
        "team.cesar.role": "Director Deportivo",
        "team.fabian.name": "Mauricio Suazo",
        "team.fabian.role": "Abogado",
        "projects.title": "PROYECTOS EN ACCIÓN",
        "projects.oil.title": "Campaña recolección de aceite",
        "carousel.slogan.proyecto1": "CAMPAÑA RECOLECCIÓN DE ACEITE USADO",
        "carousel.slogan2.proyecto1": "EDUCACIÓN AMBIENTAL DESDE LA ACCIÓN COMUNITARIA",
        "carousel.p.proyecto1": "La Fundación Planta Valiente impulsa una campaña educativa y territorial de recolección de aceite domiciliario, dirigida a escuelas que buscan fortalecer su conciencia ambiental y el compromiso ciudadano de sus comunidades. Esta acción concreta se enmarca en el Plan de Formación Ciudadana, transformando a las comunidades escolares en verdaderos agentes de cambio.",
        "carousel.slogan.proyecto2": "ACTIVIDADES MEDIO AMBIENTALES",
        "carousel.slogan2.proyecto2": "LA ORGANIZACIÓN TERRITORIAL COMO MOTOR DE CAMBIO.",
        "carousel.p.proyecto2": "En la Fundación Planta Valiente, estamos dedicados a la protección y conservación de nuestros ecosistemas a través de la acción directa y la educación. Organizamos jornadas de limpieza en playas, ríos, humedales y otros entornos naturales, con el objetivo de mitigar la contaminación y restaurar la belleza de estos espacios. Estas actividades no solo buscan preservar la biodiversidad, sino también concienciar a la comunidad sobre la importancia de cuidar nuestro planeta. Invitamos a voluntarios, organizaciones locales y empresas comprometidas a unirse a estas iniciativas, creando una red de colaboración para promover un impacto positivo y sostenible en el medio ambiente.",
        "carousel.slogan.proyecto3": "AULAS LIBRES",
        "carousel.slogan2.proyecto3": "FORMANDO CONCIENCIA PARA UN FUTURO SOSTENIBLE",
        "carousel.p.proyecto3": "A través de la Corporación Educativa Carpe Diem, administramos la Escuela Mariano Latorre, donde el director de la fundación se desempeña como sostenedor, asegurando una educación de calidad con un enfoque en la responsabilidad ambiental y social. Fomentamos el aprendizaje más allá de las aulas, involucrando a nuestros estudiantes en actividades extracurriculares que fortalecen su conexión con el entorno. Organizamos talleres de arte medioambiental, jornadas de limpieza en espacios naturales y proyectos comunitarios que integran la creatividad y el compromiso ecológico. Estas experiencias permiten a los alumnos desarrollar habilidades prácticas, valores de sostenibilidad y un sentido de responsabilidad hacia su comunidad y el planeta.",
        "projects.oil.text": "Recolectamos aceite usado de distintos establecimientos para transformarlo en biodiesel, reduciendo la contaminación y promoviendo la economía circular. ",
        "projects.beach.title": "Actividades Medio Ambientales",
        "projects.beach.text": "Organizamos diversas jornadas de limpieza en playas, ríos o humedales para proteger el ecosistema y concienciar sobre la contaminación.",
        "projects.carpe.title": "Aulas Libres",
        "projects.carpe.text": "La corporación educativa Carpe Diem, es administradora de la escuela Mariano Latorre dónde el director de la fundación se desempeña como Sostenedor.",
        "projects.viewmore": "Ver más",
        "quote.text": "\"La organización territorial como motor de cambio.\"",
        "alliances.title": "ALIANZAS",
        "contact.title": "¿TE GUSTARÍA COLABORAR CON NOSOTROS?",
        "contact.instagram": "@laplantavaliente",
        "contact.whatsapp": "+56 9 6778 6535",
        "footer.copyright": "Fundación Planta Valiente © 2025. Todos los derechos reservados.",
        "news.title": "NOTICIAS RELACIONADAS",
        "news.title.1": "Fundación Planta Valiente enseña conciencia ambiental",
        "news.1": "La Fundación recorre Chile en una Kombi Volkswagen, llevando educación ambiental a escuelas y comunidades, promoviendo arte, deportes y conexión con la naturaleza.",
        "news.title.2": "Planta Valiente: La tienda itinerante que limpia las costas de Chile",
        "news.2": "El proyecto 'Hacia Rutas Costeras' de Planta Valiente combina educación ambiental y limpieza de playas, fomentando la unión comunitaria y el cuidado del entorno.",
        "news.title.3": "Planta Valiente participa en Desafío Ríos Limpios",
        "news.3": "La fundación se unió a la limpieza del Humedal Desembocadura del Río Aconcagua, promoviendo acciones colectivas para la conservación ambiental.",
        "news.button": "Leer más",
        "carousel.slogan3.proyecto1": "¿Te gustaría participar con tu establecimiento?",
        "carousel.slogan3.proyecto2": "¡Únete a nosotros y sé parte del cambio!",
        "carousel.slogan3.proyecto3": "¿Te gustaría saber más?",
        "button.rutascosteras": "PRÓXIMAS ACTIVIDADES"
    },
    en: {
        "title": "Planta Valiente Foundation",
        "navbar.brand": "Planta Valiente Foundation",
        "navbar.home": "Home",
        "navbar.proyecto": "Go Home",
        "navbar.about": "About Us",
        "navbar.team": "Team",
        "navbar.projects": "Projects",
        "navbar.projects.all": "All",
        "navbar.projects1": "Used cooking oil collection",
        "navbar.projects2": "Environmental Activities",
        "navbar.projects3": "Free Classrooms",
        "navbar.alliances": "Alliances",
        "navbar.news": "News",
        "navbar.contact": "Contact",
        "navbar.language": "EN | ES",
        "carousel.slogan1": "EDUCATE TO TRANSFORM",
        "carousel.slogan.proyecto1": "USED COOKING OIL COLLECTION CAMPAIGN",
        "carousel.slogan2": "COMMUNITY, CONSCIOUSNESS, AND ACTION",
        "carousel.slogan3": "OPEN CLASSROOMS",
        "carousel.slogan4": "TOWARDS COASTAL ROUTES",
        "carousel.prev": "Previous",
        "carousel.next": "Next",
        "about.title": "WHO WE ARE",
        "about.text1": "Planta Valiente Foundation was born 4 years go with the mission to reconnect people with nature through environmental education. We believe that education is transversal and present in all our actions, from how we communicate to how we interact with the environment.",
        "about.text2": "We live in the Anthropocene, an era in which human actions have transformed the planet. This compels us to act urgently and consciously. Therefore, our actions focus on mobilizing real and direct change through education and environmental awareness.",
        "about.text3": "We operate nationally and aspire to an international vision, as we understand that the environmental crisis is global and requires a collective effort. Through actions such as recycling, beach cleanups, and education, we seek to inspire a change in how people relate to the planet.",
        "counter.beach": "Beach and river cleanups",
        "counter.volunteers": "Volunteers involved",
        "counter.waste": "Kilograms of waste collected",
        "team.title": "OUR TEAM",
        "team.felipe.name": "Felipe Altamirano",
        "team.felipe.role": "Founder & CEO",
        "team.victoria.name": "Victoria Cataldo",
        "team.victoria.role": "Art Director",
        "team.cesar.name": "Cesar Coumerme",
        "team.cesar.role": "Sports Director",
        "team.fabian.name": "Fabian González",
        "team.fabian.role": "Co-founder",
        "projects.title": "PROJECTS IN ACTION",
        "carousel.slogan2.proyecto1": "ENVIRONMENTAL EDUCATION FROM COMMUNITY ACTION",
        "carousel.p.proyecto1": "Foundation Planta Valiente is promoting an educational and regional campaign to collect olive oil at home, targeting schools seeking to strengthen their environmental awareness and civic engagement in their communities. This concrete action is part of the Citizenship Education Plan, transforming school communities into true agents of change.",
        "carousel.slogan.proyecto2": "ENVIRONMENTAL ACTIVITIES",
        "carousel.slogan2.proyecto2": "TERRITORIAL ORGANIZATION AS A DRIVER OF CHANGE.",
        "carousel.p.proyecto2": "At the Foundation Planta Valiente, we are dedicated to protecting and conserving our ecosystems through direct action and education. We organize cleanup days on beaches, rivers, wetlands, and other natural environments, with the goal of mitigating pollution and restoring the beauty of these spaces. These activities not only seek to preserve biodiversity but also raise community awareness about the importance of caring for our planet. We invite volunteers, local organizations, and committed businesses to join these initiatives, creating a collaborative network to promote a positive and sustainable impact on the environment.",
        "carousel.slogan.proyecto3": "FREE CLASSROOMS",
        "carousel.slogan2.proyecto3": "RAISING AWARENESS FOR A SUSTAINABLE FUTURE",
        "carousel.p.proyecto3": "The Carpe Diem educational corporation administers the Mariano Latorre School, where the foundation's director serves as its sponsor. Through its Arts and Sports Department, the Planta Valiente Foundation promotes the Aulas Libres program, a program that aligns the national curriculum with educational experiences in natural and open contexts. This methodology allows subjects to be taught in living environments, fostering creativity, movement, and a connection with the environment. The initiative is currently being implemented at the Mariano Latorre School in Valparaíso, an institution active in environmental education processes and a leader in the integration of nature, art, and sports as educational pillars.",
        "projects.oil.title": "Oil Collection Campaign",
        "projects.oil.text": "We collect used oil to transform it into biodiesel, reducing pollution and promoting a circular economy.",
        "projects.beach.title": "Beach Cleanups",
        "projects.beach.text": "We organize cleanup days on the coasts to protect marine ecosystems and raise awareness about plastic pollution.",
        "projects.carpe.title": "Free Classrooms",
        "projects.carpe.text": "The Carpe Diem Educational Corporation manages the Mariano Latorre School, where the foundation's director serves as the Maintainer.",
        "projects.viewmore": "Learn More",
        "quote.text": "\"Territorial organization as a driver of change.\"",
        "alliances.title": "ALLIANCES",
        "contact.title": "WOULD YOU LIKE TO COLLABORATE WITH US?",
        "contact.instagram": "@laplantavaliente",
        "contact.whatsapp": "+56 9 6778 6535",
        "footer.copyright": "Foundation Planta Valiente © 2025. All rights reserved.",
        "news.title": "NEWS",
        "news.title.1": "Foundation Planta Valiente teaches environmental awareness.",
        "news.1": "The Foundation travels around Chile in a Volkswagen Kombi, bringing environmental education to schools and communities, promoting art, sports, and connection with nature.",
        "news.title.2": "Planta Valiente: The traveling store that cleans Chile's coasts",
        "news.2": "The proyecto 'Towards Coastal Routes' project combines environmental education and beach cleanups, fostering community unity and environmental stewardship.",
        "news.title.3": "Planta Valiente participates in the Clean Rivers Challenge",
        "news.3": "The foundation joined the cleanup of the Aconcagua River Mouth Wetland, promoting collective actions for environmental conservation.",
        "news.button": "View more",
        "carousel.slogan3.proyecto1": "Would you like to participate with your establishment?",
        "carousel.slogan3.proyecto2": "Join us and be part of the change!",
        "carousel.slogan3.proyecto3": "Would you like to know more?",
        "button.rutascosteras": "UPCOMING ACTIVITIES"





    }
};

function setLanguage(lang) {
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        element.textContent = translations[lang][key] || element.textContent;
    });
    document.documentElement.lang = lang;
    localStorage.setItem('language', lang);
    const toggleButton = document.getElementById('language-toggle');
    toggleButton.setAttribute('data-lang', lang);
    toggleButton.textContent = translations[lang]['navbar.language'];
}

document.getElementById('language-toggle').addEventListener('click', () => {
    const currentLang = localStorage.getItem('language') || 'es';
    const newLang = currentLang === 'es' ? 'en' : 'es';
    setLanguage(newLang);
});

document.addEventListener('DOMContentLoaded', () => {
    const savedLang = localStorage.getItem('language') || 'es';
    setLanguage(savedLang);
});

// Tooltips
const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]');
const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl));


// Contadores
document.addEventListener('DOMContentLoaded', () => {
    const counters = document.querySelectorAll('.counter');
    console.log('Contadores encontrados:', counters.length); // Debería mostrar 3

    const animateCounter = (counter) => {
        const target = +counter.getAttribute('data-target');
        const increment = target / 100;
        const updateCounter = () => {
            const current = +counter.innerText;
            if (current < target) {
                counter.innerText = Math.ceil(current + increment);
                setTimeout(updateCounter, 20);
            } else {
                counter.innerText = target;
            }
        };
        updateCounter();
    };

    if ('IntersectionObserver' in window) {
        const observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    animateCounter(entry.target);
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.5 });

        counters.forEach(counter => observer.observe(counter));
    } else {
        counters.forEach(counter => animateCounter(counter));
    }

    // Iniciar animación si la sección está visible al cargar
    const section = document.querySelector('.counter-section');
    if (section) {
        const rect = section.getBoundingClientRect();
        if (rect.top >= 0 && rect.bottom <= window.innerHeight) {
            counters.forEach(counter => animateCounter(counter));
        }
    }
});

document.addEventListener('DOMContentLoaded', function () {
    if (window.innerWidth <= 768) {
        const mobileCarousel = document.querySelector('#allyCarouselMobile');
        if (mobileCarousel) {
            const carousel = new bootstrap.Carousel(mobileCarousel, {
                touch: true, // Habilitar swipe
                ride: false // No iniciar automáticamente
            });
            // Forzar actualización del carrusel para activar eventos táctiles
            carousel.cycle();
            setTimeout(() => carousel.pause(), 0); // Pausar inmediatamente para mantener control manual
        }
    }
});

// Cerrar navbar al hacer clic en un enlace en mobile
const navLinks = document.querySelectorAll('.navbar-nav .nav-link');
const dropdownItems = document.querySelectorAll('.dropdown-menu .dropdown-item');
const navbarToggler = document.querySelector('.navbar-toggler');
const navbarCollapse = document.querySelector('.navbar-collapse');

navLinks.forEach(link => {
    link.addEventListener('click', () => {
        // Solo cerrar el navbar si el enlace no es un dropdown-toggle
        if (!link.classList.contains('dropdown-toggle') && window.innerWidth <= 991) {
            navbarToggler.click();
        }
    });
});

dropdownItems.forEach(item => {
    item.addEventListener('click', () => {
        // Cerrar el navbar cuando se selecciona un elemento del dropdown
        if (window.innerWidth <= 991) {
            navbarToggler.click();
        }
    });
});

document.querySelector('.floating-home-btn').addEventListener('click', () => {
    window.scrollTo({
        top: 0,
        behavior: 'smooth'
    });
});